<template>
  <div class="page dark-bg" id="pageId_${pageId}" data-name="resetpassword">
    <div class="page-content no-padding-top">
        <!-- <div class="overlay-image text-end">
            <img src="img/banana.png" class="orange-slice" alt="" />
        </div> -->
      <div class="block h-100">
        <div class="row h-100">
          <div class="col-100 text-align-center">
            <div class="logo-small">
              <img src="img/logo_long.png" alt="" class="img logo_long" />
              <!-- <h6>GO<br /><small>MobileUX</small></h6> -->
            </div>
          </div>
          <div class="col-85 medium-50 large-40 text-align-center mx-auto align-self-center">
            <h2 class="text-center">Reset Password</h2>
            <p class="margin-bottom">Please create unique password for your account </p>
             <form id="resetPasswordForm">
                <div class="card card-light elevation-2 margin-bottom">
                  <div class="card-content card-content-padding">
                    <div class="list form-list no-margin margin-bottom-half">
                      <ul>
                        <li class="item-content item-input">
                          <div class="item-inner">
                            <div class="item-title item-floating-label">New Password</div>
                            <div class="item-input-wrap">
                              <input type="password" name="password" value="" required validate />
                              <span class="input-clear-button"></span>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                    <div class="list form-list no-margin margin-bottom-half">
                      <ul>
                        <li class="item-content item-input">
                          <div class="item-inner">
                            <div class="item-title item-floating-label">Confirm Password</div>
                            <div class="item-input-wrap">
                              <input type="password" name="confirm_password" value="" required validate />
                              <span class="input-clear-button"></span>
                            </div>
                          </div>
                        </li>
                      </ul>
                    </div>
                    <input type="submit" class="button button-fill button-large color-green elevation-3" value="Confirm" />
                  </div>
                </div>
             </form>
          </div>
          <div class="col-100 margin-top-auto align-self-end margin-bottom-half">
            <div class="row">
              <div class="col-100 text-align-center">
                <!-- Already have account? <a href="/login/" class="link button display-inline-block">Sign in <i class="icons f7-icons">chevron_right</i></a> -->
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
<script>
  export default function (props, {$f7, $on, $update, $}) {
  var app = $f7;
  const pageId = app.params.uuid();

    $(document).on('submit', '#pageId_'+pageId+' #resetPasswordForm', function (e) {
        e.preventDefault();

        let formData =  app.form.convertToData('#pageId_'+pageId+' #resetPasswordForm');
      //===================
        let url = app.params.remoteUrl + "reset-password";
        $f7.preloader.show();

        app.params.callToServer('reset-password',formData,function (response) {
              if (response.success) {
                 $f7.preloader.hide();
                app.views.main.router.navigate('/home/');
              }
        }); 


    });

     
  return $render;
  };
</script>