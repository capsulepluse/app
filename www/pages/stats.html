
<template>
<div class="page page-stats" id="pageId_${pageId}" data-name="stats">
        <div class="navbar ">
            <div class="navbar-bg">

            </div>
            <div class="navbar-inner">
                <div class="left  no-margin-right">
                    <a href="#" class="link icon-only panel-open " data-panel="left">
                        <i class="icon f7-icons size-22">bars</i>
                    </a>
                </div>
                <div class="title text-align-center">
                    <div class="logo-small">
                        <img src="img/logo.png" alt="" class="img" />
                    </div>
                </div>
                <div class="right text-align-center">
                    <a href="/notificationlist/" class="link">
                        <i class="icon f7-icons size-22">bell_fill</i>
                    </a>
                </div>                
            </div>
        </div>
        <!-- main page content -->
        <div class="page-content has-footer">
           
            <!-- offerslides -->
            <div class="block">
                <div class="swiper-container offerslidesHome margin-bottom-half "   data-loop="true">
                <!-- Additional required wrapper -->
                    <div class="swiper-wrapper">
                       
                    </div>
                    <div class="swiper-pagination pagination-offerslides-home">   
                    </div>
                </div>
            </div>

            <!-- Upload Prescription button -->
            <div class="block">
                <div class="row">
                <div class="col-100">
                    <div class="card margin-bottom">
                    <div class="card-content card-content-padding">
                        <!-- <h5>Install PWA</h5> -->
                        <div class="row">
                        <!-- <div class="col-65">
                            <p>Click "Install" to install PWA app and experience as indepedent app.</p>
                        </div> -->
                        <div class="col-100">
                            <button class="button button-gradient  color-theme" id="upload_prescription">Upload Prescription</button>
                        </div>
                        </div>
                    </div>
                    </div>
                </div>
                </div>
            </div>  

            <!-- Quick List -->
            <div class="block">
                <div class="row">
                    <div class="col-100 ">
                        <div class="card elevation-2 margin-bottom">
                            <div class="mediaList customeList list">
                                <ul>
                                      <li class="">
                                        <a class="item-link" href="#">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/capsules.png" width="44" alt=""/>
                                                </div>
                                                <div class="item-inner">
                                                    <div class="item-title">
                                                        Order Medicine
                                                        <div class="item-footer">
                                                            Genuine Medicie Min 18% Discount, Free Delivery at your door step
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                     <li class="">
                                        <a class="item-link" href="#">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/medical-record.png" width="44" alt="" />
                                                </div>
                                                <div class="item-inner">
                                                <div class="item-title">
                                                    Order By Prescription
                                                    <div class="item-footer">Submit your prescription and get Medition at home.</div>
                                                </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="item-link" href="#">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/pills.png" width="44" alt="" />
                                                </div>
                                                <div class="item-inner">
                                                <div class="item-title">
                                                    Reorder Medicine
                                                    <div class="item-footer">Genuine Medicine. Maximum Discount.</div>
                                                </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="item-link" href="#">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/microscope.png" width="44" alt="" />
                                                </div>
                                                <div class="item-inner">
                                                <div class="item-title">
                                                    Book Lab Test 
                                                    <div class="item-footer">Genuine Medicine. Maximum Discount. Low price</div>
                                                </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li> 
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Category List -->
            <div class="block">
                <div class="row margin-bottom-half">
                <div class="col">
                    <h5 class="no-margin-bottom">Shop By Category</h5>
                </div>
                <div class="col-auto">
                    <a href="/categoryList/" class="link text-color-theme">View All <i class="icons f7-icons">chevron_right</i></a>
                </div>
                </div>
            </div>   

            <!-- category blocks -->
            <div class="block">
                <div class="row">

                    ${categories.map((item) => $h`

                    <div class="col-33">
                        <a href="/productlist/category/${item.id}/">
                            <div class="card elevation-2 margin-bottom bg-green-light homeCategory">
                                <div class="card-content card-content-padding_">

                                    <figure class="no-margin-bottom avatar avatar-40_ page-bg rounded p-1 text-align-center">
                                        <img src="${item.img}" alt="" />
                                    </figure>
                                    <h6 class="text-muted text-align-center small title-footer-twoline">${item.name}</h6>
                                </div>
                            </div>
                         </a>
                    </div>

                    `)}


                
                </div>
            </div>

        </div>

        <!-- footer static -->
        <footer class="footer">
            <div class="container">
                <ul>
                    <li>
                        <a href="/home/">
                            <span>
                                <i class="icon f7-icons">house</i>
                                <span class="nav-text">Home</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a class="active" href="/stats/">
                            <span>
                                <i class="icon f7-icons">chart_bar</i>
                                <span class="nav-text">Stats</span>
                            </span>
                        </a>
                    </li>
                    <li class="center-item">
                        <a href="/cart/">
                            <span>
                                <i class="icon f7-icons">cart</i>
                                <span class="nav-text">card-content</span>
                                <span class="countercart">3</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="/style/">
                            <span>
                                <i class="icon f7-icons">circle_grid_hex</i>
                                <span class="nav-text">Style</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="/settings/">
                            <span>
                                <i class="icon f7-icons">gear</i>
                                <span class="nav-text">Settings</span>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </footer>

    </div>
</template>
<script>
    export default function (props, {$f7, $on, $update, $}) {
    var app = $f7;
    var mobile = '';
    let categories = [];
    let slider = [];
    const pageId = app.params.uuid();
    
    $on('pageInit', () => {
        
        $f7.preloader.show();

        const swiperHome = new Swiper(".offerslidesHome", {
                    slidesPerView: "1",
                    spaceBetween: 10,
                    pagination: {
                    el: ".pagination-offerslides-home",
                    },
                    breakpoints: {
                    640: {
                        slidesPerView: 1,
                    },
                    768: {
                        slidesPerView: 2,
                        spaceBetween: 20,
                    },
                    1024: {
                        slidesPerView: 3,
                        spaceBetween: 30,
                    },
                    },
                });

        const setslider = (items,key)=>{

        let slideritems = '' + 
                    ' <div class="swiper-slide">' + 
                    '                                <div class="card elevation-2 card-theme">' + 
                    '                                    <div class="card-content card-content-padding ">' + 
                    '                                        <div class="row">' + 
                    '                                            <div class="col-50">' + 
                    '                                            <img src="'+items.img+'" alt="" class="mw-100" />' + 
                    '                                            </div>' + 
                    '                                            <div class="col text-align-left align-self-center no-padding-left">' + 
                    '                                            <h6 class="fw-normal no-margin-bottom">'+items.line1+'</h6>' + 
                    '                                            <h2>'+items.line2+'</h2>' + 
                    '                                            <p>'+items.line3+'<br /><strong>'+items.line4+'</strong></p>' + 
                    '                                            </div>' + 
                    '                                        </div>' + 
                    '                                    </div>' + 
                    '                                </div>  ' + 
                    '                            </div> ' + 
                    '';


                    swiperHome.addSlide(key, slideritems);
                    var elele = $(".pagination-offerslides-home");
                    swiperHome.pagination.elele;

                 }
        
                app.params.callToServer( "home-page","",success);

                function success(Responce){
                    $f7.preloader.hide();
                    console.log(status);
                    console.log(Responce);
                    categories = Responce.data.category ;
                    slider = Responce.data.slider ;
                    $update();
                    slider.forEach(setslider);
                    swiperHome.autoplay.start();
                    swiperHome.pagination.init();
                    // swiperHome.pagination.update();
                    // swiperHome.pagination.render()

                }
        });

    
    return $render;
    };
</script>
