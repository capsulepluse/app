<template>
    <div class="page page-home" id="pageId_${pageId}" data-name="home">
        <div class="navbar ">
            <div class="navbar-bg">

            </div>
            <div class="navbar-inner">
                <div class="left  no-margin-right">
                    <a href="#" class="link icon-only panel-open " data-panel="left">
                        <i class="icon f7-icons size-22">bars</i>
                    </a>
                </div>
                <div class="title text-align-center">
                    <div class="logo-small">
                        <img src="img/logo.png" alt="" class="img" />
                    </div>
                </div>
                <div class="right text-align-center">
                    <a href="/notificationlist/" class="link">
                        <i class="icon f7-icons size-22">bell_fill</i>
                    </a>
                </div>
            </div>
        </div>
        <!-- main page content -->
        <div class="page-content has-footer">

            <!-- offerslides -->
            <div  class="block  skeleton-text skeleton-effect-wave placeHolderOut">
                <div class=" " >
                    <!-- Additional required wrapper -->
                    <div class="card-content  ">
                        <div class=" rounded skeleton-block " style=" height: 80px; width:100%; "></div>
                       
                    </div>
                   
                </div>
            </div>
           
            <div class="block" >
                <div class="swipe swiper-container offerslidesHome margin-bottom-mini "   data-loop_="false">
                    <!-- Additional required wrapper -->
                    <div class="swiper-wrapper">

                    </div>
                    <!-- <div class="swiper-pagination pagination-offerslides-home">
                    </div> -->
                </div>
            </div>

            <!-- Upload Prescription button -->
            <div class="block">
                <div class="row">
                    <div class="col-100">
                        <div class="card margin-bottom-mini">
                            <div class="card-content  card-content-padding_">

                                
                                <!-- <h5>Install PWA</h5> -->
                                <div class="row">
                                    <!-- <div class="col-65">
                                        <p>Click "Install" to install PWA app and experience as indepedent app.</p>
                                         </div> -->
                                    <div class="col-100">
                                        <a href="/orderbyprescription/" class="button button-gradient_  color-theme"
                                            id="upload_prescription">Upload Prescription</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Quick List -->
            <div class="block">
                <div class="row">
                    <div class="col-100 ">
                        <div class="card elevation-2 margin-bottom-half">
                            <div class="mediaList customeList list">
                                <ul>
                                    <li class="">
                                        <a class="item-link" href="/medicinelist/">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/order_medicine.svg" width="44"
                                                        alt="" />
                                                </div>
                                                <div class="item-inner">
                                                    <div class="item-title">
                                                        Order Medicine
                                                        <div class="item-footer">
                                                            Genuine Medicine Min 18% Discount, Free Delivery at your door
                                                            step
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="item-link" href="/orderbyprescription/">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/order_by_prescription.svg" width="44"
                                                        alt="" />
                                                </div>
                                                <div class="item-inner">
                                                    <div class="item-title">
                                                        Order By Prescription
                                                        <div class="item-footer">Submit your prescription and get
                                                            Medition at home.</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="item-link" href="/reorders/">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/re_odered.svg" width="44" alt="" />
                                                </div>
                                                <div class="item-inner">
                                                    <div class="item-title">
                                                        Reorder Medicine
                                                        <div class="item-footer">Genuine Medicine. Maximum Discount.
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li class="">
                                        <a class="item-link" href="/nearByLabList/">
                                            <div class="item-content">
                                                <div class="item-media">
                                                    <img slot="media" src="img/homepage/labtest.svg" width="44"
                                                        alt="" />
                                                </div>
                                                <div class="item-inner">
                                                    <div class="item-title">
                                                        Book Lab Test
                                                        <div class="item-footer">Book Lab test at home . Maximum discount. Low price</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>


            <!-- Category List -->
            <div class="block">
                <div class="row margin-bottom-half">
                    <div class="col">
                        <h6 class="no-margin-bottom"><p>Shop By Category</p></h6>
                    </div>
                    <div class="col-auto">
                        <a href="/categoryList/" class="link text-color-theme">View All <i
                                class="icons f7-icons">chevron_right</i></a>
                    </div>
                </div>
            </div>

            <!-- category blocks -->
            <div class="block">
                <div class="row padding-left-half padding-right ">


                    
                    <div class="col-33 padding-left-half no-padding-right placeHolderOut">
                        <a href="">
                            <div class="card skeleton-text skeleton-effect-wave">

                                <div class="card-content p-1 elevation-2 margin-bottom-half  homeCategory">
                                    <div class=" rounded skeleton-block " style=" height: 100px; width:100%; "></div>
                                    <div class="text-muted text-align-center small title-footer-twoline">Items Details
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>

                    <div class="col-33 padding-left-half no-padding-right placeHolderOut ">
                        <a href="">
                            <div class="card skeleton-text skeleton-effect-wave">

                                <div class="card-content p-1 elevation-2 margin-bottom-half  homeCategory">
                                    <div class=" rounded skeleton-block " style=" height: 100px; width:100%; "></div>
                                    <div class="text-muted text-align-center small title-footer-twoline">Items Details
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>
                    <div class="col-33 padding-left-half no-padding-right placeHolderOut ">
                        <a href="">
                            <div class="card skeleton-text skeleton-effect-wave">

                                <div class="card-content p-1 elevation-2 margin-bottom-half  homeCategory">
                                    <div class=" rounded skeleton-block " style=" height: 100px; width:100%; "></div>
                                    <div class="text-muted text-align-center small title-footer-twoline">Items Details
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>
                    
                    <div class="col-33 padding-left-half no-padding-right placeHolderOut">
                        <a href="">
                            <div class="card skeleton-text skeleton-effect-wave">

                                <div class="card-content p-1 elevation-2 margin-bottom-half  homeCategory">
                                    <div class=" rounded skeleton-block " style=" height: 100px; width:100%; "></div>
                                    <div class="text-muted text-align-center small title-footer-twoline">Items Details
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>
                    <div class="col-33 padding-left-half no-padding-right placeHolderOut ">
                        <a href="">
                            <div class="card skeleton-text skeleton-effect-wave">

                                <div class="card-content p-1 elevation-2 margin-bottom-half  homeCategory">
                                    <div class=" rounded skeleton-block " style=" height: 100px; width:100%; "></div>
                                    <div class="text-muted text-align-center small title-footer-twoline">Items Details
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>
                    <div class="col-33 padding-left-half no-padding-right placeHolderOut ">
                        <a href="">
                            <div class="card skeleton-text skeleton-effect-wave">

                                <div class="card-content p-1 elevation-2 margin-bottom-half  homeCategory">
                                    <div class=" rounded skeleton-block " style=" height: 100px; width:100%; "></div>
                                    <div class="text-muted text-align-center small title-footer-twoline">Items Details
                                    </div>
                                </div>

                            </div>
                        </a>
                    </div>



                    ${categories.map((item) => $h`

                    <div class="col-33 padding-left-half no-padding-right ">
                        <a href="/productlist/product/${item.id}/">
                            <div class="card elevation-2 margin-bottom-half  homeCategory">
                                <div class="card-content">

                                    <figure
                                        class="no-margin-bottom avatar avatar-150_ rounded p-1 thum-parent">
                                        <img class="rounded height-50 thum-child page-bg" src="${item.img}" alt="" />
                                    </figure>
                                    <div class=" text-muted_ text-align-center font-10 title-footer-twoline">${item.name}
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>

                    `)}



                </div>
            </div>

        </div>

        <!-- footer static -->
        <footer class="footer">
            <div class="container">
                <ul>
                    <li>
                        <a class="active" href="/home/">
                            <span>
                                <i class="icon f7-icons">house</i>
                                <span class="nav-text">Home</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a  href="/nearByLabList/">
                            <span>
                                <i class="icon f7-icons">eyedropper_halffull</i>
                                <span class="nav-text">Lab</span>
                            </span>
                        </a>
                    </li>
                    <li class="center-item">
                        <a href="/cart/">
                            <span>
                                <i class="icon f7-icons">cart</i>
                                <span class="nav-text">card-content</span>
                                <span  class="countercart">${cartCount}</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="/profile/">
                            <span>
                                <i class="icon f7-icons">person</i>
                                <span class="nav-text">Profile</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="/contactus/">
                            <span>
                                <i class="icon f7-icons">question_circle</i>
                                <span class="nav-text">Help</span>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </footer>

    </div>
</template>
<script>
    export default function (props, {
        $f7,
        $on,
        $update,
        $
    }) {
        var app = $f7;
        var mobile = '';
        let categories = [];
        let slider = [];
        const pageId = app.params.uuid();
        let cartCount = 0;
        $on('pageInit', () => {
           // app.statusbar.setBackgroundColor('#f4fbf7');
          //  app.statusbar.setTextColor('black');

            // $f7.preloader.show(); 
           // cartCount = app.params.cartCount();
            const swiperHome = new Swiper(".offerslidesHome", {
                slidesPerView: "1",
                spaceBetween: 10,
              /*  pagination: {
                    el: ".pagination-offerslides-home",
                }, */
                breakpoints: {
                    640: {
                        slidesPerView: 1,
                    },
                    768: {
                        slidesPerView: 2,
                        spaceBetween: 20,
                    },
                    1024: {
                        slidesPerView: 3,
                        spaceBetween: 30,
                    },
                },
            });

            const setslider = (items, key) => {


                let slideritems = '' +
                    ' <div class="swiper-slide">' +
                    '                                <div class="card  elevation-2 card-theme">' +
                    '                                    <div class="card-content ">' +
                    '                                        <div class="row">' +
                    '                                            <div class="col-40 thum-parent">' +
                    '                                            <img src="' + items.img +
                    '                                                  " alt="" class="mw-100 thum-child" style="height:80px;" />' +
                    '                                            </div>' +
                    '                                            <div class="col slider-text text-align-left align-self-center no-padding-left">' +
                    '                                            <div class="fw-normal no-margin-bottom">' +
                                                                          items.line1 + '</div>' +
                    '                                            <div>' + items.line2 + '</div>' +
                    '                                            <div>' + items.line3 + '<br /><strong>' +
                                                                 items.line4 + '</strong></div>' +
                    '                                            </div>' +
                    '                                        </div>' +
                    '                                    </div>' +
                    '                                </div>  ' +
                    '                            </div> ' +
                    '';


                swiperHome.addSlide(key, slideritems);
                var elele = $(".pagination-offerslides-home");
                swiperHome.pagination.elele;

            }

            app.params.callToServer("home-page", "", success);
            
            //update cart counter
            app.params.callToServer('cart-count','',function (response) {
                if (response.success) {
                    cartCount =  response.data.cartCount;
                }
                $update();
            }); 

            function success(Responce) {
                // $f7.preloader.hide(); 
                $('.placeHolderOut').hide();
                console.log(status);
                console.log(Responce);
                categories = Responce.data.category;
                slider = Responce.data.slider;
                $update();
                slider.forEach(setslider);
                swiperHome.autoplay.start();
                swiperHome.pagination.init();
                // swiperHome.pagination.update();
                // swiperHome.pagination.render()

            }
        });


        return $render;
    };
</script>