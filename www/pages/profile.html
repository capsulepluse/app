<template>
    <div class="page page-profile" data-name="profile">
        <div class="navbar ">
            <div class="navbar-bg"></div>
            <div class="navbar-inner">
                <div class="left  no-margin-right">
                    <a href="#" class="link icon-only panel-open " data-panel="left">
                        <i class="icon f7-icons size-22">bars</i>
                    </a>
                </div>
                <div class="title">
                    <h5 class="no-margin-bottom">Profile</h5>
                </div>
                <div class="right">
                    <a href="/notificationlist/" class="link">
                        <i class="icon f7-icons size-22">bell_fill</i>
                    </a>
                </div>
            </div>
        </div>
        <!-- main page content -->
        <div class="page-content has-footer">
    
            <!-- wallet info -->
            <div class="block">
                <div class="row">
                    <div class="col-100">
                        <div class="card card-theme_ elevation-2 margin-bottom-half">
                            <div class="card-content card-content-padding">

                                <!-- <div class="card elevation-2 card-light margin-bottom-half">
                                    <div class="card-content card-content-padding">
                                         -->
                                        <div class="row display-flex justify-content-center">
                                            <div class="col-auto">
                                                <i class="icon f7-icons size-60 text-color-primary">person_crop_square</i>
                                                <!-- <figure class="avatar avatar-80 rounded mx-auto">
                                                    <img src="img/user2.jpg" alt="" />
                                                </figure> -->
                                            </div>
                                        </div>
                                        <div class="display-flex justify-content-center">
                                            <div class="">
                                                <h3 class="no-margin-bottom text-color-primary">${profile.user}</h3>
                                                <!-- <p class="text-opac">Kolkata, WB</p> -->
                                                
                                            </div>
                                            <div class="col-auto align-self-center">
                                                <!-- <a href="/editprofile/" class="btn btn-link text-color-white">
                                                    <i class="icons f7-icons">pencil_outline</i>
                                                </a> -->
                                            </div>
                                        </div>

                                        <div class="row display-flex justify-content-center">
                                    
                                            <div class="col-auto ">
                                                <h4 class="text-color-primary"><small>${profile.mobile} </small></h4>
                                            </div>
                                           
                                        </div>

                                    <!-- </div>
                                </div> -->
                               
                                
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
        
    
            <!-- address  -->
            <!-- <div class="block">
                <div class="row margin-bottom-half">
                    <div class="col">
                        <h5 class="no-margin-bottom"><p>Address</p>
                        </h5>
                    </div>
                </div>
            </div> -->

            <div class="block">
                <div class="row">


                    
                    <div class="col-100 medium-50">
                        <div class="card elevation-2 product margin-bottom-half">
                            <div class="card-header">
                                <!-- for default address  -->
                                
                                <div class="row">
                                    <!-- <div class="col-auto align-self-center md">
                                        <label class="item-radio item-radio-icon-start item-content">
                                            <input type="radio" name="defaultAddress" value="${item.id}" checked />
                                            <i class="icon icon-radio"></i>
                                        </label>

                                    </div> -->
                                    <div class="col align-self-center no-padding-left_">
                                        <span class="text-opac small">Primary Address</span>
                                        <!-- <h5 class="no-margin-bottom"><p class="no-margin-button">${item.type}</p>
                                           
                                        </h5> -->
                                    </div>
                                    <div class="col-auto align-self-center">
                                        <a href="/editaddress/${item.id}/" class="btn btn-link text-color-theme"><i
                                                class="icons f7-icons">square_pencil</i></a>
                                        <!-- <a href="#" class="btn btn-link text-color-theme"><i class="icons f7-icons">trash</i></a> -->
                                    </div>
                                </div>
                               

                            </div>
                            <div class="card-content card-content-padding">
                                <!-- <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d53231.962811927515!2d-117.15726395005734!3d33.5014375970648!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x80db6252f51abe23%3A0x68bc0e88a03806a8!2sTemecula%2C%20CA%2C%20USA!5e0!3m2!1sen!2sin!4v1623665123540!5m2!1sen!2sin"
                                        class="h-190 width-100 rounded shadow-sm margin-bottom-half" allowfullscreen="" loading="lazy">
                                    </iframe> -->
                                <div class="row">
                                    <div class="col-auto font-12">
                                        <div class="addressHeader font-13">
                                           Name -  ${item.name}
                                        </div>
                                        <div >
                                           Address - ${item.address}, 
                                        </div>
                                        <div>Landmark - ${item.landmark}</div>
                                        <div>Pin -  ${item.pin}</div>
                                        <div>Mobile - ${item.mobile}</div>
                                    </div>
                                    <!-- <div class="col-auto align-self-center">
                                        <a href="#"><i
                                                class="icons f7-icons text-color-theme float-right">arrow_up_right_circle</i></a>
                                    </div> -->
                                </div>
                            </div>
                        </div>


                    </div>







                </div>
            </div>
    
    
        </div>
        
         <!-- footer static -->
         <footer class="footer">
            <div class="container">
                <ul>
                    <li>
                        <a  href="/home/">
                            <span>
                                <i class="icon f7-icons">house</i>
                                <span class="nav-text">Home</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a  href="/nearByLabList/">
                            <span>
                                <i class="icon f7-icons">eyedropper_halffull</i>
                                <span class="nav-text">Lab</span>
                            </span>
                        </a>
                    </li>
                    <li class="center-item">
                        <a href="/cart/">
                            <span>
                                <i class="icon f7-icons">cart</i>
                                <span class="nav-text">card-content</span>
                                <span class="countercart">${cartCount}</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a class="active" href="/profile/">
                            <span>
                                <i class="icon f7-icons">person</i>
                                <span class="nav-text">Profile</span>
                            </span>
                        </a>
                    </li>
                    <li>
                        <a href="/contactus/">
                            <span>
                                <i class="icon f7-icons">question_circle</i>
                                <span class="nav-text">Help</span>
                            </span>
                        </a>
                    </li>
                </ul>
            </div>
        </footer>
    
    </div>
</template>
<script>
    export default (props, { $f7, $theme, $on, $update, $ }) => {
        var app = $f7;
        var profile = {};
        var item = {};
        const pageId = app.params.uuid();
        let cartCount = 0; 
    
        $on('pageBeforeIn', () => {
            /* $f7.preloader.show();
            app.params.callToServer( "cart-address",'',success);
            function success(ResponceData){
                $f7.preloader.hide();

                updateCurrentCart(ResponceData.data.cartDetails);
                item = ResponceData.data.defaultAddress[0];
                $update();
            } */
        });

        $on('pageInit', () => {
            $f7.preloader.show();
            app.params.callToServer( "profile",'',success);
            function success(ResponceData){
                $f7.preloader.hide();
                console.log(ResponceData);
                item = ResponceData.data.address;
                profile = ResponceData.data.profile;
                $update();
            }

             //cart count updation 
            app.params.callToServer('cart-count','', function (response) {
                if (response.success) {
                    cartCount =  response.data.cartCount;
                }
                $update();
            }); 

        })




  
      return $render;
    }
  </script>
